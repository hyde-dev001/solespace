# ğŸ“Š Employee Account Creation Flow - Visual Guide

## Complete Flow Diagram

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   EMPLOYEE ACCOUNT CREATION & LOGIN SYSTEM                â•‘
â•‘                          SoleSpace ERP Platform                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  STEP 1: SHOP OWNER CREATES EMPLOYEE ACCOUNT                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚                                                                             â”‚
â”‚  1. Login as Shop Owner                                                    â”‚
â”‚     â”œâ”€ Email: shop-owner@example.com                                       â”‚
â”‚     â””â”€ Password: [shop owner password]                                     â”‚
â”‚                                                                             â”‚
â”‚  2. Navigate to User Access Control                                        â”‚
â”‚     Dashboard â†’ User Access Control â†’ Employees Tab                        â”‚
â”‚                                                                             â”‚
â”‚  3. Click "Add Employee" Button                                            â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚     â”‚   ğŸ†• ADD EMPLOYEE FORM               â”‚                               â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                               â”‚
â”‚     â”‚ Full Name:        [John Doe]        â”‚  âœ“ Required                   â”‚
â”‚     â”‚ Email Address:    [john@ex.com]    â”‚  âœ“ Required (unique)          â”‚
â”‚     â”‚ Phone Number:     [09123456789]    â”‚  â—‡ Optional                    â”‚
â”‚     â”‚                                    â”‚                                 â”‚
â”‚     â”‚ Position:         [Manager â–¼]      â”‚  âœ“ Required (dropdown)        â”‚
â”‚     â”‚ Department:       [Finance â–¼]      â”‚  âœ“ Required (dropdown)        â”‚
â”‚     â”‚ Functional Role:  [Finance H. â–¼]   â”‚  â—‡ Optional (clarifies duty)  â”‚
â”‚     â”‚                                    â”‚                                 â”‚
â”‚     â”‚ Salary:           [50000]          â”‚  â—‡ Optional                    â”‚
â”‚     â”‚ Hire Date:        [2026-01-24]     â”‚  â—‡ Optional                    â”‚
â”‚     â”‚                                    â”‚                                 â”‚
â”‚     â”‚ ERP Module Role:  [FINANCE â–¼]      â”‚  âœ“ Required                   â”‚
â”‚     â”‚ Status:           [Active â–¼]       â”‚  âœ“ Required                    â”‚
â”‚     â”‚                                    â”‚                                 â”‚
â”‚     â”‚  [Cancel]  [Add Employee]          â”‚                                 â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                         â”‚                                                   â”‚
â”‚                         â–¼                                                   â”‚
â”‚  4. Click "Add Employee" Button                                            â”‚
â”‚                         â”‚                                                   â”‚
â”‚                         â–¼                                                   â”‚
â”‚  5. Confirmation Popup                                                     â”‚
â”‚     "Are you sure you want to add John Doe                                 â”‚
â”‚      as an employee with FINANCE role?"                                    â”‚
â”‚     [Cancel] [Yes, add it!]                                                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  BACKEND PROCESSING                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚                                                                             â”‚
â”‚  POST /api/hr/employees                                                     â”‚
â”‚    â”‚                                                                        â”‚
â”‚    â”œâ”€ Validate Input Data âœ“                                               â”‚
â”‚    â”‚  â”œâ”€ Name: Required, max 255 chars                                     â”‚
â”‚    â”‚  â”œâ”€ Email: Required, unique (not in employees or users)               â”‚
â”‚    â”‚  â”œâ”€ Role: Required, must be HR|FINANCE|MANAGER|STAFF                 â”‚
â”‚    â”‚  â”œâ”€ Position & Department: Required                                   â”‚
â”‚    â”‚  â””â”€ All other fields: Standard validation                             â”‚
â”‚    â”‚                                                                        â”‚
â”‚    â”œâ”€ Create Employee Record                                              â”‚
â”‚    â”‚  INSERT INTO employees (                                              â”‚
â”‚    â”‚    name, email, phone, position, department,                          â”‚
â”‚    â”‚    functional_role, salary, hire_date, status,                        â”‚
â”‚    â”‚    shop_owner_id, created_at, updated_at                              â”‚
â”‚    â”‚  ) VALUES (...)                                                       â”‚
â”‚    â”‚                                                                        â”‚
â”‚    â”œâ”€ Generate Temporary Password                                          â”‚
â”‚    â”‚  tempPassword = Str::random(10)                                       â”‚
â”‚    â”‚  Example: "Ax7Kp2Mq9W"                                                â”‚
â”‚    â”‚                                                                        â”‚
â”‚    â”œâ”€ Create User Account                                                 â”‚
â”‚    â”‚  INSERT INTO users (                                                  â”‚
â”‚    â”‚    name, email, password(hashed), role,                               â”‚
â”‚    â”‚    shop_owner_id, status, created_at                                  â”‚
â”‚    â”‚  ) VALUES (...)                                                       â”‚
â”‚    â”‚  Password: Hash::make(tempPassword) = "$2y$12$..."                    â”‚
â”‚    â”‚                                                                        â”‚
â”‚    â”œâ”€ Create Audit Log Entry                                              â”‚
â”‚    â”‚  INSERT INTO audit_logs (                                             â”‚
â”‚    â”‚    actor_user_id, action, target_type, target_id,                     â”‚
â”‚    â”‚    metadata, shop_owner_id, created_at                                â”‚
â”‚    â”‚  ) VALUES (...)                                                       â”‚
â”‚    â”‚  metadata = {                                                         â”‚
â”‚    â”‚    "assigned_role": "FINANCE",                                        â”‚
â”‚    â”‚    "employee_email": "john@example.com",                              â”‚
â”‚    â”‚    "functional_role": "Finance Handler",                              â”‚
â”‚    â”‚    "branch": null                                                     â”‚
â”‚    â”‚  }                                                                     â”‚
â”‚    â”‚                                                                        â”‚
â”‚    â””â”€ Return API Response (201 Created)                                    â”‚
â”‚       {                                                                    â”‚
â”‚         "message": "Employee and account created successfully",            â”‚
â”‚         "data": {                                                          â”‚
â”‚           "employee": {                                                    â”‚
â”‚             "id": 1,                                                       â”‚
â”‚             "name": "John Doe",                                            â”‚
â”‚             "email": "john@example.com",                                   â”‚
â”‚             "role": "FINANCE",                                             â”‚
â”‚             "status": "active",                                            â”‚
â”‚             ...                                                            â”‚
â”‚           },                                                               â”‚
â”‚           "user_id": 42,                                                   â”‚
â”‚           "temporary_password": "Ax7Kp2Mq9W"  â† IMPORTANT                 â”‚
â”‚         }                                                                  â”‚
â”‚       }                                                                    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  STEP 2: RECEIVE TEMPORARY CREDENTIALS                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚
â”‚                                                                             â”‚
â”‚  SweetAlert Modal Appears:                                                 â”‚
â”‚                                                                             â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—   â”‚
â”‚  â•‘                                                                     â•‘   â”‚
â”‚  â•‘  âœ… Employee Account Created Successfully                          â•‘   â”‚
â”‚  â•‘                                                                     â•‘   â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘   â”‚
â”‚  â•‘  â”‚                                                             â”‚   â•‘   â”‚
â”‚  â•‘  â”‚  ğŸ“‹ Share these credentials with the employee:            â”‚   â•‘   â”‚
â”‚  â•‘  â”‚                                                             â”‚   â•‘   â”‚
â”‚  â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â•‘   â”‚
â”‚  â•‘  â”‚  â”‚  ğŸ“§ LOGIN EMAIL                                       â”‚ â”‚   â•‘   â”‚
â”‚  â•‘  â”‚  â”‚  john@example.com                                     â”‚ â”‚   â•‘   â”‚
â”‚  â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â•‘   â”‚
â”‚  â•‘  â”‚                                                             â”‚   â•‘   â”‚
â”‚  â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â•‘   â”‚
â”‚  â•‘  â”‚  â”‚  ğŸ” TEMPORARY PASSWORD                                â”‚ â”‚   â•‘   â”‚
â”‚  â•‘  â”‚  â”‚  Ax7Kp2Mq9W                                          â”‚ â”‚   â•‘   â”‚
â”‚  â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â•‘   â”‚
â”‚  â•‘  â”‚                                                             â”‚   â•‘   â”‚
â”‚  â•‘  â”‚  âš ï¸  IMPORTANT INSTRUCTIONS:                              â”‚   â•‘   â”‚
â”‚  â•‘  â”‚                                                             â”‚   â•‘   â”‚
â”‚  â•‘  â”‚  1. âš¡ This password will NOT be displayed again         â”‚   â•‘   â”‚
â”‚  â•‘  â”‚  2. ğŸ“¬ Share it securely with the employee via email     â”‚   â•‘   â”‚
â”‚  â•‘  â”‚  3. ğŸŒ Employee should login at:                         â”‚   â•‘   â”‚
â”‚  â•‘  â”‚     http://localhost:8000/user/login                     â”‚   â•‘   â”‚
â”‚  â•‘  â”‚  4. ğŸ”‘ Employee must change password immediately          â”‚   â•‘   â”‚
â”‚  â•‘  â”‚  5. ğŸ“Š Employee can then access ERP modules              â”‚   â•‘   â”‚
â”‚  â•‘  â”‚                                                             â”‚   â•‘   â”‚
â”‚  â•‘  â”‚  âœ“ Employee Role: FINANCE                                â”‚   â•‘   â”‚
â”‚  â•‘  â”‚    Can access corresponding ERP modules                  â”‚   â•‘   â”‚
â”‚  â•‘  â”‚                                                             â”‚   â•‘   â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘   â”‚
â”‚  â•‘                                                                     â•‘   â”‚
â”‚  â•‘           [âœ“ I have saved the credentials]                         â•‘   â”‚
â”‚  â•‘                                                                     â•‘   â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  âœ“ Password auto-copied to clipboard                                       â”‚
â”‚  âœ“ Shop Owner writes down credentials                                      â”‚
â”‚  âœ“ Shop Owner closes modal                                                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  STEP 3: SHOP OWNER SHARES CREDENTIALS                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                    â”‚
â”‚                                                                             â”‚
â”‚  Shop Owner MUST share securely:                                           â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“§ Email, ğŸ’¬ SMS, ğŸ—£ï¸ In-person, or ğŸ“± Secure Messenger                 â”‚
â”‚                                                                             â”‚
â”‚  Message to Employee:                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  â”‚ Hi John,                                 â”‚                              â”‚
â”‚  â”‚                                          â”‚                              â”‚
â”‚  â”‚ You've been added to the ERP system.     â”‚                              â”‚
â”‚  â”‚                                          â”‚                              â”‚
â”‚  â”‚ Login Email: john@example.com           â”‚                              â”‚
â”‚  â”‚ Temporary Password: Ax7Kp2Mq9W          â”‚                              â”‚
â”‚  â”‚                                          â”‚                              â”‚
â”‚  â”‚ Go to:                                   â”‚                              â”‚
â”‚  â”‚ http://localhost:8000/user/login         â”‚                              â”‚
â”‚  â”‚                                          â”‚                              â”‚
â”‚  â”‚ âš ï¸  IMPORTANT:                           â”‚                              â”‚
â”‚  â”‚ Change your password on first login!    â”‚                              â”‚
â”‚  â”‚                                          â”‚                              â”‚
â”‚  â”‚ Don't share this password with anyone   â”‚                              â”‚
â”‚  â”‚                                          â”‚                              â”‚
â”‚  â”‚ Questions? Contact me.                  â”‚                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  STEP 4: EMPLOYEE LOGS IN                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚                                                                             â”‚
â”‚  1. Navigate to Login Page                                                 â”‚
â”‚     URL: http://localhost:8000/user/login                                  â”‚
â”‚                                                                             â”‚
â”‚  2. User Login Form                                                        â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚     â”‚      USER ACCOUNT LOGIN             â”‚                                 â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                 â”‚
â”‚     â”‚                                    â”‚                                 â”‚
â”‚     â”‚  Email Address                     â”‚                                 â”‚
â”‚     â”‚  [john@example.com        ]        â”‚                                 â”‚
â”‚     â”‚                                    â”‚                                 â”‚
â”‚     â”‚  Password                          â”‚                                 â”‚
â”‚     â”‚  [Ax7Kp2Mq9W           ]          â”‚                                 â”‚
â”‚     â”‚                                    â”‚                                 â”‚
â”‚     â”‚  â˜ Remember me                     â”‚                                 â”‚
â”‚     â”‚                                    â”‚                                 â”‚
â”‚     â”‚          [LOGIN]                   â”‚                                 â”‚
â”‚     â”‚                                    â”‚                                 â”‚
â”‚     â”‚  Forgot password? [Link]           â”‚                                 â”‚
â”‚     â”‚  Don't have account? [Link]        â”‚                                 â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                         â”‚                                                   â”‚
â”‚                         â–¼                                                   â”‚
â”‚  3. Backend Validation (UserController::login)                             â”‚
â”‚     â”œâ”€ Find user by email                                                  â”‚
â”‚     â”‚  SELECT * FROM users WHERE email = 'john@example.com'                â”‚
â”‚     â”‚  â†’ Found user record                                                 â”‚
â”‚     â”‚                                                                      â”‚
â”‚     â”œâ”€ Verify password                                                     â”‚
â”‚     â”‚  Hash::check('Ax7Kp2Mq9W', '$2y$12$...')                             â”‚
â”‚     â”‚  â†’ Password hash matches âœ“                                           â”‚
â”‚     â”‚                                                                      â”‚
â”‚     â”œâ”€ Check status                                                        â”‚
â”‚     â”‚  IF user.status !== 'active' THEN error âœ—                            â”‚
â”‚     â”‚  user.status = 'active' â†’ OK âœ“                                       â”‚
â”‚     â”‚                                                                      â”‚
â”‚     â”œâ”€ Create session                                                      â”‚
â”‚     â”‚  Auth::login($user)                                                  â”‚
â”‚     â”‚  $request->session()->regenerate()                                   â”‚
â”‚     â”‚                                                                      â”‚
â”‚     â”œâ”€ Update login tracking                                               â”‚
â”‚     â”‚  last_login_at = now()                                               â”‚
â”‚     â”‚  last_login_ip = '192.168.1.100'                                     â”‚
â”‚     â”‚                                                                      â”‚
â”‚     â””â”€ Success! Redirect to dashboard                                      â”‚
â”‚                                                                             â”‚
â”‚  4. Employee Dashboard                                                     â”‚
â”‚     âœ… Login successful                                                    â”‚
â”‚     âœ… User profile loaded                                                 â”‚
â”‚     âœ… Session active                                                      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  STEP 5: EMPLOYEE CHANGES PASSWORD                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â”‚
â”‚                                                                             â”‚
â”‚  âš ï¸  MUST DO IMMEDIATELY AFTER FIRST LOGIN                               â”‚
â”‚                                                                             â”‚
â”‚  1. Navigate to Profile Settings                                           â”‚
â”‚     Dashboard â†’ Profile / Settings â†’ Change Password                       â”‚
â”‚                                                                             â”‚
â”‚  2. Change Password Form                                                   â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚     â”‚   CHANGE PASSWORD                 â”‚                                   â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                   â”‚
â”‚     â”‚                                  â”‚                                   â”‚
â”‚     â”‚  Current Password                â”‚                                   â”‚
â”‚     â”‚  [Ax7Kp2Mq9W           ]        â”‚  Temp password                    â”‚
â”‚     â”‚                                  â”‚                                   â”‚
â”‚     â”‚  New Password                    â”‚                                   â”‚
â”‚     â”‚  [SecurePass123        ]        â”‚  Requirements:                    â”‚
â”‚     â”‚                                  â”‚  âœ“ Min 8 characters              â”‚
â”‚     â”‚                                  â”‚  âœ“ Include A-Z                   â”‚
â”‚     â”‚                                  â”‚  âœ“ Include a-z                   â”‚
â”‚     â”‚                                  â”‚  âœ“ Include 0-9                   â”‚
â”‚     â”‚  Confirm New Password            â”‚                                   â”‚
â”‚     â”‚  [SecurePass123        ]        â”‚  Must match                       â”‚
â”‚     â”‚                                  â”‚                                   â”‚
â”‚     â”‚      [CANCEL] [SAVE]             â”‚                                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚                         â”‚                                                   â”‚
â”‚                         â–¼                                                   â”‚
â”‚  3. Backend Processing                                                     â”‚
â”‚     â”œâ”€ Validate new password meets requirements                            â”‚
â”‚     â”œâ”€ Hash new password with bcrypt                                       â”‚
â”‚     â”œâ”€ Update user password in database                                    â”‚
â”‚     â”œâ”€ Invalidate old sessions (optional)                                  â”‚
â”‚     â””â”€ Success: "Password changed successfully"                            â”‚
â”‚                                                                             â”‚
â”‚  4. Employee uses NEW password for future logins                           â”‚
â”‚     Next login: john@example.com + SecurePass123                           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  STEP 6: EMPLOYEE ACCESSES ERP MODULES                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚
â”‚                                                                             â”‚
â”‚  Based on Assigned Role:                                                   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Role: FINANCE                                                   â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ âœ… CAN ACCESS:                                                  â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚   /finance        â†’ Finance Dashboard                          â”‚       â”‚
â”‚  â”‚                   â†’ Create invoices                            â”‚       â”‚
â”‚  â”‚                   â†’ Manage expenses                            â”‚       â”‚
â”‚  â”‚                   â†’ View financial reports                     â”‚       â”‚
â”‚  â”‚   /dashboard      â†’ User dashboard (limited view)             â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ âŒ CANNOT ACCESS:                                               â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚   /hr             â†’ 403 Forbidden                              â”‚       â”‚
â”‚  â”‚                   "Your role does not have access..."          â”‚       â”‚
â”‚  â”‚   /create-invoice â†’ Requires other role access                â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ ğŸ”’ ENFORCED BY:                                                 â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚   â”œâ”€ RoleMiddleware                                            â”‚       â”‚
â”‚  â”‚   â”‚  Checks: user.role in_array(['FINANCE'])                  â”‚       â”‚
â”‚  â”‚   â”‚                                                             â”‚       â”‚
â”‚  â”‚   â”œâ”€ GateErpAccess                                             â”‚       â”‚
â”‚  â”‚   â”‚  Checks: user.role !== 'SUPER_ADMIN'                       â”‚       â”‚
â”‚  â”‚   â”‚  Checks: user.role in allowed_roles                        â”‚       â”‚
â”‚  â”‚   â”‚                                                             â”‚       â”‚
â”‚  â”‚   â””â”€ ShopIsolationMiddleware                                   â”‚       â”‚
â”‚  â”‚      Checks: user.shop_owner_id matches request               â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â”‚  Access Flow Diagram:                                                      â”‚
â”‚                                                                             â”‚
â”‚  Employee navigates to: /finance                                           â”‚
â”‚           â”‚                                                                â”‚
â”‚           â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚  auth:super_admin       â”‚  â† Check: Is user authenticated?            â”‚
â”‚  â”‚  Guard:Sanctum          â”‚     Yes: Continue âœ“                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚           â”‚                                                                â”‚
â”‚           â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚  GateErpAccess          â”‚  â† Check: Is user SUPER_ADMIN?              â”‚
â”‚  â”‚  Middleware             â”‚     No: Continue âœ“                           â”‚
â”‚  â”‚                         â”‚     Check: Is role in allowed?               â”‚
â”‚  â”‚                         â”‚     Yes (FINANCE): Continue âœ“                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚           â”‚                                                                â”‚
â”‚           â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚  RoleMiddleware         â”‚  â† Check: Does role match route?            â”‚
â”‚  â”‚  (role:FINANCE)         â”‚     Yes (FINANCE): Continue âœ“               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚           â”‚                                                                â”‚
â”‚           â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚  ShopIsolation          â”‚  â† Check: Does shop_owner_id match?         â”‚
â”‚  â”‚  Middleware             â”‚     Yes: Continue âœ“                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚           â”‚                                                                â”‚
â”‚           â–¼                                                                â”‚
â”‚  âœ… ACCESS GRANTED                                                         â”‚
â”‚  Finance Dashboard loads                                                   â”‚
â”‚  Employee can see:                                                         â”‚
â”‚  â”œâ”€ Invoices                                                               â”‚
â”‚  â”œâ”€ Expenses                                                               â”‚
â”‚  â”œâ”€ Financial reports                                                      â”‚
â”‚  â””â”€ Reports                                                                â”‚
â”‚                                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚                                                                             â”‚
â”‚  If employee tries: /hr (not authorized)                                   â”‚
â”‚           â”‚                                                                â”‚
â”‚           â–¼                                                                â”‚
â”‚  Role middleware checks: Is role FINANCE in ['HR']?                       â”‚
â”‚           â”‚                                                                â”‚
â”‚           â–¼                                                                â”‚
â”‚  âŒ NO - Access Denied                                                     â”‚
â”‚  Return: 403 Forbidden                                                     â”‚
â”‚  Message: "Your role does not have access to ERP modules"                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                             COMPLETE FLOW SUMMARY                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Timeline:                                                                   â”‚
â”‚                                                                             â”‚
â”‚ T+0:00    Shop Owner creates employee (30 seconds)                         â”‚
â”‚           â”œâ”€ Fills form                                                     â”‚
â”‚           â””â”€ Receives credentials modal                                     â”‚
â”‚                                                                             â”‚
â”‚ T+0:30    Shop Owner shares credentials (depends on delivery method)       â”‚
â”‚           â”œâ”€ Email (5 min)                                                  â”‚
â”‚           â”œâ”€ SMS (1 min)                                                    â”‚
â”‚           â””â”€ In-person (immediate)                                          â”‚
â”‚                                                                             â”‚
â”‚ T+30:00   Employee logs in (1 min)                                          â”‚
â”‚           â”œâ”€ Navigate to /user/login                                        â”‚
â”‚           â”œâ”€ Enter email and temp password                                  â”‚
â”‚           â””â”€ Successful login                                               â”‚
â”‚                                                                             â”‚
â”‚ T+31:00   Employee changes password (1 min)                                 â”‚
â”‚           â”œâ”€ Go to Profile                                                  â”‚
â”‚           â”œâ”€ Change password                                                â”‚
â”‚           â””â”€ Save new password                                              â”‚
â”‚                                                                             â”‚
â”‚ T+32:00   Employee accesses ERP modules (ongoing)                           â”‚
â”‚           â”œâ”€ Can access /finance (if FINANCE role)                         â”‚
â”‚           â”œâ”€ Cannot access /hr (different role)                            â”‚
â”‚           â””â”€ All actions tracked & shop-isolated                            â”‚
â”‚                                                                             â”‚
â”‚ TOTAL:    ~32 minutes from creation to full access                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Database Changes:

  employees Table:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ID: 1                             â”‚
  â”‚ name: John Doe                    â”‚
  â”‚ email: john@example.com           â”‚
  â”‚ position: Finance Officer         â”‚
  â”‚ department: Finance               â”‚
  â”‚ role: FINANCE                     â”‚
  â”‚ shop_owner_id: 5                  â”‚
  â”‚ status: active                    â”‚
  â”‚ created_at: 2026-01-24 10:30:00  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  users Table:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ID: 42                            â”‚
  â”‚ name: John Doe                    â”‚
  â”‚ email: john@example.com           â”‚
  â”‚ password: $2y$12$... (hashed)     â”‚
  â”‚ role: FINANCE                     â”‚
  â”‚ shop_owner_id: 5                  â”‚
  â”‚ status: active                    â”‚
  â”‚ last_login_at: 2026-01-24 10:40  â”‚
  â”‚ last_login_ip: 192.168.1.100      â”‚
  â”‚ created_at: 2026-01-24 10:30:00  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  audit_logs Table:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ID: 1                             â”‚
  â”‚ actor_user_id: 1 (Shop Owner)     â”‚
  â”‚ action: employee_created          â”‚
  â”‚ target_type: employee             â”‚
  â”‚ target_id: 1                      â”‚
  â”‚ metadata:                         â”‚
  â”‚ {                                 â”‚
  â”‚   "assigned_role": "FINANCE",     â”‚
  â”‚   "employee_email": "john@ex.com",â”‚
  â”‚   "functional_role": "Finance H.", â”‚
  â”‚   "branch": null                  â”‚
  â”‚ }                                 â”‚
  â”‚ shop_owner_id: 5                  â”‚
  â”‚ created_at: 2026-01-24 10:30:00  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Key Security Points:

  âœ… Temporary password:
     - 10 random characters (Ax7Kp2Mq9W)
     - Only shown once in modal
     - Hashed before storage: $2y$12$xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
     - Never recoverable from database

  âœ… Role enforcement:
     - Middleware validates user.role
     - 403 Forbidden if unauthorized
     - Shop isolation prevents cross-shop access

  âœ… Audit trail:
     - Logs who created (actor_user_id)
     - What was created (action, target_id)
     - When it was created (created_at)
     - Metadata for compliance

  âœ… Session security:
     - Session created on login
     - Validated on each request
     - Regenerated on login
     - Destroyed on logout

```

---

## Quick Reference Tables

### Temporary Password

| Property | Value |
|----------|-------|
| Length | 10 characters |
| Characters | Uppercase + Lowercase + Numbers |
| Example | `Ax7Kp2Mq9W` |
| Shown | Modal only (one-time) |
| Storage | Hashed (bcrypt) |
| Recoverable | âŒ No |
| Requirement | Must change on first login |

### User Roles & Access

| Role | HR Module | Finance Module | Dashboard | Can Create Employees |
|------|-----------|-----------------|-----------|----------------------|
| HR | âœ… YES | âŒ NO (403) | âœ… Limited | âœ… YES |
| FINANCE | âŒ NO (403) | âœ… YES | âœ… Limited | âœ… YES |
| MANAGER | âŒ NO (403) | âŒ NO (403) | âœ… Full | âŒ NO |
| STAFF | âŒ NO (403) | âŒ NO (403) | âœ… Limited | âŒ NO |
| SUPER_ADMIN | âŒ NO (403) | âŒ NO (403) | âœ… Limited | âœ… YES |

### Middleware Stack

| Middleware | Purpose | Check | Returns |
|-----------|---------|-------|---------|
| `auth:super_admin` | Authenticate request | Bearer token valid? | 401 if invalid |
| `GateErpAccess` | Gate ERP pages | Role not SUPER_ADMIN? | 403 if SUPER_ADMIN |
| `RoleMiddleware` | Check role match | User role in allowed? | 403 if mismatch |
| `ShopIsolationMiddleware` | Isolate shops | shop_owner_id match? | 403 if mismatch |

---

End of Visual Flow Diagram
